{% comment %} HUMANPEA collection grid (ALD-style) {% endcomment %}
<section class="hp-collection" data-section-id="{{ section.id }}">
  <div class="hp-collection__bar">
    <button class="hp-filter-toggle" data-filter-toggle>Filter</button>
    <h1 class="hp-collection__title">{{ collection.title | escape }}</h1>
    {%- render 'collection-sorting' -%}
  </div>

  <div class="hp-collection__content">
    <div class="hp-filters" data-filters hidden>
      {%- render 'facets', results: collection, enable_filtering: true, enable_sorting: true -%}
    </div>

    {%- paginate collection.products by 24 -%}
      <div class="hp-grid">
        {%- for product in collection.products -%}
          {%- render 'card-product', card_product: product, show_quick_add: true -%}
        {%- endfor -%}
      </div>

      {%- if paginate.pages > 1 -%}
        <div class="hp-pagination">
          {%- if paginate.next -%}
            <a class="hp-btn hp-btn--ghost" href="{{ paginate.next.url }}">Load more</a>
          {%- endif -%}
        </div>
      {%- endif -%}
    {%- endpaginate -%}
  </div>
</section>

{% schema %}
{
  "name": "Collection (HumanPea)",
  "settings": []
}
{% endschema %}

<script>
  document.addEventListener('click', (e) => {
    const t = e.target.closest('[data-filter-toggle]');
    if (!t) return;
    const panel = document.querySelector('[data-filters]');
    if (!panel) return;
    panel.hidden = !panel.hidden;
  });
</script>
