{% comment %}
  HUMANPEA â€“ Collection Grid (ALD-style)
  - 4 across desktop, responsive 3 / 2 / 1
  - Edge-to-edge layout (safe, no overflow)
  - Compatible with infinite scroll or standard pagination
{% endcomment %}

<section class="hp-ald" data-section-id="{{ section.id }}">
  {% paginate collection.products by section.settings.items_per_page %}
    <div class="hp-grid hp-grid--ald">
      {% for product in collection.products %}
        <article class="hp-card" role="article">
          <a class="hp-card__link" href="{{ product.url }}">
            <div class="hp-card__media">
              {% unless product.available %}
                <span class="hp-badge">Sold Out</span>
              {% endunless %}

              {%- assign first = product.featured_media -%}
              {% if first %}
                {{ first
                  | image_url: width: 1200
                  | image_tag: loading: 'lazy', class: 'hp-card__img hp-card__img--primary', alt: product.title | escape }}
              {% endif %}

              {% if product.media.size > 1 %}
                {%- assign second = product.media[1] -%}
                {{ second
                  | image_url: width: 1200
                  | image_tag: loading: 'lazy', class: 'hp-card__img hp-card__img--secondary', alt: product.title | escape }}
              {% endif %}
            </div>

            <div class="hp-card__meta">
              <h3 class="hp-card__title">{{ product.title | escape }}</h3>
              <div class="hp-card__price">
                {% render 'price', product: product, price_class: 'price--small' %}
              </div>
            </div>
          </a>
        </article>
      {% endfor %}
    </div>

    {% render 'pagination', paginate: paginate %}
  {% endpaginate %}
</section>

{% schema %}
{
  "name": "HP Collection Grid",
  "settings": [
    {
      "type": "range",
      "id": "items_per_page",
      "label": "Products per page",
      "min": 8,
      "max": 48,
      "step": 4,
      "default": 24
    }
  ],
  "presets": [
    {
      "name": "HP Collection Grid"
    }
  ]
}
{% endschema %}
